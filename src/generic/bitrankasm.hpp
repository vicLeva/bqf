#ifndef __bitrankasm__
#define __bitrankasm__
#include "popcount.hpp"
//
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//
uint64_t bitrankasm_u64_c(const uint64_t _val, const uint64_t pos)
{
	const uint64_t val = _val & ((2ULL << pos) - 1);
	return popcount_u64_c( val );

}
//
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//
#if defined(__SSE4_2__)
uint64_t bitrankasm_u64_x86(const uint64_t _val, const uint64_t pos)
{
	const uint64_t val = _val & ((2ULL << pos) - 1);
	return popcount_u64_x86( val );
}
#endif
//
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//
uint64_t bitrankasm_u64_builtin(const uint64_t _val, const uint64_t pos)
{
	const uint64_t val = _val & ((2ULL << pos) - 1);
	return popcount_u64_builtin( val );
}
//
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//
#if defined(__aarch64__) || defined(_M_ARM64)
uint64_t bitrankasm_arm(const uint64_t _val, const uint64_t pos)
{
	const uint64_t val = _val & ((2ULL << pos) - 1);
	return popcount_u64_arm( val );
}
#endif
//
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//
#endif